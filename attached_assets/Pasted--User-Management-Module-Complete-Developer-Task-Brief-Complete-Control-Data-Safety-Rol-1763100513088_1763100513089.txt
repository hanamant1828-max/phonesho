ğŸ”
ğŸ“Œ User Management Module â€” Complete Developer Task Brief

(Complete Control, Data Safety, Roles & Permissions, Audit Trail)

ğŸ¯ Objective

Build a secure and scalable User Management System for the Mobile Shop Management Software with:

Multiple user roles

Custom permission levels

Activity tracking & audit logs

Data safety & access control

Easy UI for role & permission management

1ï¸âƒ£ User Roles (Predefined)

Create these default roles:

Role	Description	Access Level
Admin	Full access	All modules + settings + user mgmt
Manager	Operational control	Billing, inventory, reports, limited user actions
Cashier	POS-only user	Sales, billing, returns, no settings
Sales Staff	Limited product access	View stock, create sales, no reports
2ï¸âƒ£ User Fields Required

Store these fields in users table:

user_id (PK)

name

username

email

phone

password_hash

role_id (FK â†’ roles table)

status (active / inactive / locked)

created_at

last_login_at

failed_login_attempts

is_password_reset_required

store_id (if multi-branch)

3ï¸âƒ£ Role Fields Required (roles table)

role_id

role_name

description

is_default (bool)

4ï¸âƒ£ Permissions (Granular)

Create a permissions table with the following permissions grouped by module.

A. POS / Sales

Create Sale

Edit Sale

Cancel Sale

Process Returns

Apply Discounts

Access Customer Info

B. Inventory

View Inventory

Add/Update Product

Delete Product

Manage Stock / Adjustments

View Cost Price

Transfer Stock

C. Reports

View Daily / Weekly Sales

View Profit / Margin

Export Reports

D. System Settings

Change POS Settings

Manage Users

Manage Roles

Configure Taxes

Backup / Restore

E. Customers

Add/Edit Customer

Delete Customer

View Customer History

âœ” Developers must design permissions to be add/remove/editable from the UI.

5ï¸âƒ£ Roleâ€“Permission Mapping (role_permissions table)

map_id

role_id

permission_id

Allows custom permissions per role.

6ï¸âƒ£ User Activity Tracking (Audit Trail)

Create an audit_logs table with:

log_id

user_id

action_type (login, sale_created, discount_applied, product_deleted, etc.)

description

ip_address

device_info

created_at

Track at minimum:

Logins (success & failures)

Sale creation / modification

Returns & refunds

Product creation / deletion

Stock adjustments

Settings changes

User management operations

7ï¸âƒ£ Security & Data Safety Requirements

âœ“ Passwords must use bcrypt/argon2 hashing
âœ“ Role & permission checks on every API endpoint
âœ“ Protect admin routes using middleware
âœ“ Account lock after 5 failed logins
âœ“ JWT / session-based authentication
âœ“ Restrict non-admins from:

Viewing cost price

Modifying stock

Viewing audit logs

Changing system settings

8ï¸âƒ£ User Management UI Tasks
Create screens for:

User List

Name, username, role, last login, status

Actions: Edit, Disable, Reset Password

Add User form

Set role, phone, email, password

Roles & Permissions Management

Create/Edit role

Toggle permissions (checkbox UI)

Audit Log Viewer

Filters: date, user, action

9ï¸âƒ£ API Endpoints Required
Users

POST /users â€” create user

GET /users â€” list users

GET /users/:id

PUT /users/:id â€” update details

PATCH /users/:id/status â€” activate/deactivate

POST /users/reset-password

Roles

GET /roles

POST /roles

PUT /roles/:id

Permissions

GET /permissions

PUT /roles/:id/permissions

Audit Logs

GET /audit-logs

ğŸ”Ÿ Acceptance Criteria (QA Checklist)

 Admin can create unlimited users

 Role permissions can be modified dynamically

 Cashier cannot access inventory or reports

 All important actions appear in audit log

 Account lock on repeated login failures

 All permission checks enforced on backend

 User list loads under 200ms

 Audit logs paginated & filterable âœ“ Automatic daily data backup